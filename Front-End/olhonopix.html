<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>De Olho no Pix ‚Äî Front-end</title>
  <meta name="description" content="Prot√≥tipo educativo para prevenir golpes no Pix: den√∫ncia, pesquisa e orienta√ß√µes." />
  <meta name="theme-color" content="#0f172a" />
  <link rel="icon" href="DeOlhoNoPix%20imagem%201.png"> 
  <style>
    :root{
      --brand-primary:#dff4ff;
      --brand-secondary:#2f7a25;
      --brand-secondary-grad:#6eaa5e;
      --brand-accent:#007bff;
      --bg:#ffffff; /* Fundo claro padr√£o */
      --text:#0f172a;
      --muted:#475569;
      --card:#ffffff;
      --border:#e2e8f0;
      --ok:#2e7d32;
      --warn:#ff9800;
      --amber:#fbbf24;
      --danger:#dc2626;
      --focus:#2563eb;
      --max:1400px;
      --shadow:none;
    }

    /* üî¶ Modo escuro vis√≠vel */
    body.dark{
      --bg:#0b1120;
      --text:#e2e8f0;
      --card:#1e293b;
      --border:#334155;
      --brand-primary:#1e3a8a;
      --brand-secondary:#10b981;
      --brand-secondary-grad:#34d399;
      --brand-accent:#60a5fa;
      --muted:#94a3b8;
      --focus:#3b82f6;
      --warn:#f59e0b;  /* mant√©m sem√°foro */
      --amber:#fbbf24;
      --danger:#ef4444;
    }
    body.dark header{
      background:linear-gradient(90deg,#1e293b,#0f172a);
      border-bottom-color:#334155;
    }
    body.dark nav.topnav a:hover,
    body.dark nav.topnav a[aria-current="page"]{
      background:#1e293b;
      border-color:#475569;
    }
    body.dark .btn-tool:hover{ background:#334155; }
    body.dark thead th{ background:#0f172a; color:#c7d2fe; }

    /* ‚ôø Modo dalt√¥nico escuro (forte) */
    body.daltonico{
      --bg:#0a0a0a;           /* fundo escuro mais neutro */
      --text:#f5f7fb;         /* texto claro */
      --card:#141414;         /* superf√≠cies */
      --border:#2a2a2a;       /* bordas */
      /* Paleta segura (evita confus√£o R/G) */
      --brand-primary:#0ea5e9;       /* ciano vivo */
      --brand-secondary:#f59e0b;     /* √¢mbar forte */
      --brand-secondary-grad:#fbbf24;/* √¢mbar claro */
      --brand-accent:#a78bfa;        /* roxo m√©dio */
      --muted:#cbd5e1;               /* texto secund√°rio */
      --focus:#22d3ee;               /* ciano claro para foco */
      --ok:#22d3ee;                  /* ciano = ok */
      --warn:#f59e0b;                /* √¢mbar = aten√ß√£o */
      --amber:#fde047;               /* amarelo claro */
      --danger:#e11d48;              /* magenta/rose = perigo */
    }
    body.daltonico header{
      background:linear-gradient(90deg,#111827,#0a0a0a);
      border-bottom-color:#2a2a2a;
    }
    body.daltonico nav.topnav a:hover,
    body.daltonico nav.topnav a[aria-current="page"]{
      background:#111827;
      border-color:#374151;
    }
    body.daltonico .btn-tool:hover{ background:#1f2937; }
    body.daltonico thead th{ background:#111827; color:#93c5fd; }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,"Helvetica Neue",Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      transition:background .25s,color .25s;
    }
    a{color:inherit;text-decoration:none}
    .app{min-height:100%;display:grid;grid-template-rows:auto 1fr auto}

    .skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip:focus{left:12px;top:12px;width:auto;height:auto;background:#fff;color:#000;padding:.5rem .75rem;border-radius:.5rem;z-index:1000}

    header{background:linear-gradient(90deg, var(--brand-primary), #eef9ff 40%, #e7ffe7 120%); border-bottom:1px solid var(--border)}
    .topbar{max-width:var(--max); margin:0 auto; display:flex; align-items:center; gap:16px; padding:14px 20px}
    .brand{display:flex; align-items:center; gap:12px}

    nav.topnav{margin-left:auto; display:flex; gap:10px; flex-wrap:wrap}
    nav.topnav a{padding:10px 14px; border-radius:12px; border:1px solid transparent; font-weight:700}
    nav.topnav a[aria-current="page"], nav.topnav a:hover{background:#ffffff55; border-color:var(--border)}

    /* Bot√µes de ferramentas (somente texto) */
    .tools{display:flex; gap:10px; flex-wrap:wrap; margin-left:8px}
    .btn-tool{
      border:1px solid var(--border);
      background:var(--card);
      border-radius:12px;
      padding:8px 12px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:14px;
      font-weight:600
    }
    .btn-tool:hover{background:#f1f5f9}

    .container{max-width:var(--max); margin:0 auto; padding:36px 24px}
    main{min-height:60vh}

    .card{background:transparent; border:none; border-radius:0; padding:0; box-shadow:none}
    .card h1,.card h2{margin:0 0 10px 0}
    .muted{color:var(--muted)}

    .badge{display:inline-block; padding:.25rem .5rem; border-radius:999px; font-size:12px; border:1px solid var(--border)}
    .badge-req{background:#dcfce7; color:#166534}
    .badge-opt{background:#fef9c3; color:#854d0e}

    .grid{display:grid; gap:20px}
    .grid.two{grid-template-columns:repeat(2,1fr)}
    .grid.responsive{grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}

    form{display:grid; gap:14px}
    label{display:grid; gap:6px; font-size:14px}
    .hint{font-size:12px; color:var(--muted)}
    input,select,textarea{padding:12px 14px; border:1px solid var(--border); border-radius:14px; background:var(--card); font:inherit; color:inherit}
    input:focus,select:focus,textarea:focus{outline:3px solid var(--focus); outline-offset:2px}
    input:required:invalid{border-color:#f59e0b}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}

    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .btn{border:1px solid var(--border); background:var(--card); border-radius:14px; padding:12px 16px; cursor:pointer; display:inline-flex; align-items:center; gap:8px; font-weight:700; transition:filter .2s}
    .btn.primary{background:linear-gradient(135deg, var(--brand-accent), #60a5fa); color:#fff; border-color:transparent}
    .btn.primary:hover{filter:brightness(0.95)}
    .btn.success{background:linear-gradient(135deg, var(--brand-secondary-grad), #a7f3d0); color:#064e3b; border-color:transparent}
    .btn.ghost{background:var(--card)}

    .error{display:none; color:#b91c1c; font-size:12px}
    input:invalid[aria-invalid="true"] + .error,
    input:user-invalid + .error{display:block}

    section.page{display:none; padding:0}
    section.page.active{display:block}

    /* CTA tiles (hub original) */
    .cta-tile{padding:28px; display:grid; gap:8px; place-content:center; text-align:center; border-radius:18px; background:linear-gradient(135deg,#fff,#f7fbff)}
    .cta-tile:hover{outline:3px solid var(--brand-accent); outline-offset:2px}
    .cta-title{font-size:22px; font-weight:800; color:#0b3b7a}

    /* Tabela */
    table{width:100%; border-collapse:separate; border-spacing:0; background:var(--card); border-radius:16px; overflow:hidden}
    th,td{padding:12px 14px; border-bottom:1px solid var(--border); text-align:left; font-size:14px}
    thead th{background:#eef6ff; color:#0b3b7a}
    tr:last-child td{border-bottom:none}
    tr.risk-5 td:first-child{box-shadow:inset 4px 0 0 var(--warn)}
    tr.risk-10 td:first-child{box-shadow:inset 4px 0 0 var(--amber)}
    tr.risk-15 td:first-child{box-shadow:inset 4px 0 0 var(--danger)}
    tr.risk-5{background:rgba(245,158,11,.06)}
    tr.risk-10{background:rgba(251,191,36,.10)}
    tr.risk-15{background:rgba(220,38,38,.08)}

    footer{border-top:1px solid var(--border); background:var(--card)}
    .foot{max-width:var(--max); margin:0 auto; padding:16px 20px; color:var(--muted); font-size:14px; display:flex; justify-content:space-between; align-items:center; gap:16px; flex-wrap:wrap}

    .toast{position:fixed; left:50%; bottom:24px; transform:translate(-50%, 120%); background:#0ea5e9; color:#fff; padding:12px 16px; border-radius:12px; font-weight:700; transition:transform .35s ease, opacity .35s ease; opacity:0; z-index:9999}
    .toast.show{transform:translate(-50%, 0); opacity:1}

    @media (max-width: 1024px){ .grid.two{grid-template-columns:1fr} }
    @media (max-width: 900px){ .row{grid-template-columns:1fr} }
    @media (prefers-reduced-motion: reduce){ *{scroll-behavior:auto} }
  </style>
</head>
<body>
  <a href="#main" class="skip">Pular para o conte√∫do</a>
  <div class="app">
    <header role="banner" aria-label="Topo do site">
      <div class="topbar">
        <div class="brand" aria-label="Identidade do site">
          <img src="DeOlhoNoPix%20imagem%201.png" alt="Logotipo De Olho no Pix" style="height:44px; width:auto; border-radius:12px">
          <div>
            <div style="font-weight:900; font-size:18px">De Olho no Pix</div>
            <div class="muted" style="font-size:12px">Serenidade e preven√ß√£o a golpes</div>
          </div>
        </div>
        <nav class="topnav" aria-label="Navega√ß√£o principal (topo)">
          <a data-route href="#/hub">A√ß√µes</a>
          <a data-route href="#/denunciar">Denunciar</a>
          <a data-route href="#/pesquisar">Pesquisar</a>
          <a data-route href="#/faq">FAQ</a>
        </nav>
        <div class="tools" aria-label="Ferramentas de acessibilidade e tema">
          <button id="btn-contrast" class="btn-tool" title="Alternar modo dalt√¥nico">Acessibilidade</button>
          <button id="btn-dark" class="btn-tool" title="Alternar modo escuro">Modo Escuro</button>
        </div>
      </div>
    </header>

    <div class="container">
      <main id="main" role="main" class="grid" style="gap:24px">
        <!-- IN√çCIO / ENTRAR -->
        <section id="inicio" class="page card active" aria-labelledby="h-inicio">
          <h1 id="h-inicio">Entrar</h1>
          <p class="muted">Acesse com tranquilidade. Este √© um prot√≥tipo visual (sem back-end).</p>
          <form aria-describedby="d-inicio" style="max-width:800px; margin:0 auto" novalidate>
            <span id="d-inicio" class="sr-only">Campos de e-mail e senha. Links para recuperar senha e cadastrar-se.</span>
            <label>
              <span>E-mail <span class="badge badge-req">Obrigat√≥rio</span></span>
              <input id="login-email" type="email" required placeholder="Digite seu e-mail" autocomplete="username" aria-invalid="false" />
              <small class="hint">Usaremos seu e-mail para acesso.</small>
              <small class="error" aria-live="polite">Informe um e-mail v√°lido.</small>
            </label>
            <label>
              <span>Senha <span class="badge badge-req">Obrigat√≥rio</span></span>
              <input id="login-pass" type="password" required placeholder="Digite sua senha" autocomplete="current-password" minlength="6" aria-invalid="false" />
              <small class="hint">M√≠nimo de 6 caracteres.</small>
              <small class="error" aria-live="polite">Senha muito curta.</small>
            </label>
            <div class="actions" style="justify-content:center">
              <a class="btn primary" data-route href="#/hub" aria-label="Entrar e ir para A√ß√µes">Entrar</a>
              <a class="btn ghost" data-route href="#/recuperar">Esqueci minha senha</a>
              <a class="btn success" data-route href="#/cadastro">Cadastrar-se</a>
            </div>
          </form>
        </section>

        <!-- CADASTRAR-SE -->
        <section id="cadastro" class="page card" aria-labelledby="h-cadastro">
          <h1 id="h-cadastro">Cadastrar-se</h1>
          <p class="muted">Leva menos de dois minutos. Campos marcados como obrigat√≥rios precisam ser preenchidos.</p>
          <form id="form-cadastro" style="max-width:980px; margin:0 auto" novalidate>
            <div class="row">
              <label>
                <span>Nome completo <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input type="text" required placeholder="Ex.: Maria de Souza" aria-invalid="false" />
                <small class="error" aria-live="polite">Informe seu nome completo.</small>
              </label>
              <label>
                <span>CPF <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input id="cpf" type="text" required inputmode="numeric" pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" placeholder="000.000.000-00" aria-invalid="false" />
                <small class="hint">Apenas n√∫meros ‚Äî a formata√ß√£o aparece sozinha.</small>
                <small class="error" aria-live="polite">Digite no formato 000.000.000-00.</small>
              </label>
            </div>
            <div class="row">
              <label>
                <span>N√∫mero de telefone <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input id="tel" type="tel" required inputmode="tel" placeholder="(00) 00000-0000" aria-invalid="false" />
                <small class="error" aria-live="polite">Informe um telefone v√°lido.</small>
              </label>
              <label>
                <span>E-mail <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input type="email" required placeholder="voce@exemplo.com" aria-invalid="false" />
                <small class="error" aria-live="polite">E-mail inv√°lido.</small>
              </label>
            </div>
            <label>
              <span>Senha <span class="badge badge-req">Obrigat√≥rio</span></span>
              <input type="password" required minlength="6" placeholder="Crie uma senha segura" aria-invalid="false" />
              <small class="error" aria-live="polite">M√≠nimo de 6 caracteres.</small>
            </label>
            <div class="actions" style="justify-content:center">
              <a class="btn ghost" data-route href="#/inicio">‚Üê Voltar</a>
              <button class="btn primary" type="submit">Confirmar cadastro</button>
            </div>
          </form>
        </section>

        <!-- HUB (A√á√ïES) ‚Äî restaurado igual ao original -->
        <section id="hub" class="page card" aria-labelledby="h-hub">
          <h1 id="h-hub">O que voc√™ deseja fazer?</h1>
          <p class="muted">Escolha uma a√ß√£o. Voc√™ pode denunciar uma chave Pix suspeita ou pesquisar antes de enviar.</p>
          <div class="grid two" style="max-width:1100px; margin:0 auto">
            <a class="cta-tile" data-route href="#/denunciar" aria-label="Ir para Denunciar um golpe" style="background:linear-gradient(135deg,#fff,#e8fff0)">
              <div class="cta-title">Denunciar um golpe</div>
              <div class="muted">Relate a chave e, se poss√≠vel, inclua o n√∫mero do B.O.</div>
            </a>
            <a class="cta-tile" data-route href="#/pesquisar" aria-label="Ir para Pesquisar" style="background:linear-gradient(135deg,#fff,#eef6ff)">
              <div class="cta-title">Quero pesquisar</div>
              <div class="muted">Consulte den√∫ncias e siga com mais seguran√ßa.</div>
            </a>
          </div>
        </section>

        <!-- DENUNCIAR -->
        <section id="denunciar" class="page card" aria-labelledby="h-denunciar">
          <h1 id="h-denunciar">Denunciar um golpe</h1>
          <p class="muted">Forne√ßa o m√°ximo de informa√ß√µes que tiver. Itens marcados como obrigat√≥rios ajudam na verifica√ß√£o.</p>
          <form id="form-denuncia" style="max-width:1100px; margin:0 auto" novalidate>
            <div class="row">
              <label>
                <span>Tipo de chave Pix <span class="badge badge-req">Obrigat√≥rio</span></span>
                <select id="tipo" required aria-invalid="false">
                  <option value="">Selecione‚Ä¶</option>
                  <option>E-mail</option>
                  <option>Telefone</option>
                  <option>CPF</option>
                  <option>CNPJ</option>
                  <option>Chave aleat√≥ria</option>
                </select>
                <small class="error" aria-live="polite">Escolha um tipo de chave.</small>
              </label>
              <label>
                <span>Nome da conta <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input id="nome" type="text" required placeholder="Nome como aparece no banco" aria-invalid="false" />
                <small class="error" aria-live="polite">Informe o nome da conta.</small>
              </label>
            </div>
            <div class="row">
              <label>
                <span>Meio do CPF/CNPJ <span class="badge badge-opt">Opcional</span></span>
                <input id="docparcial" type="text" inputmode="numeric" placeholder="***.123.***-** / **.***.***/0001-**" />
              </label>
              <label>
                <span>Ag√™ncia <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input id="ag" type="text" required inputmode="numeric" placeholder="0001" aria-invalid="false" />
                <small class="error" aria-live="polite">Informe a ag√™ncia.</small>
              </label>
            </div>
            <div class="row">
              <label>
                <span>Conta <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input id="cc" type="text" required inputmode="numeric" placeholder="123456-7" aria-invalid="false" />
                <small class="error" aria-live="polite">Informe a conta.</small>
              </label>
              <label>
                <span>Banco <span class="badge badge-req">Obrigat√≥rio</span></span>
                <input id="banco" type="text" required placeholder="Ex.: Banco X" aria-invalid="false" />
                <small class="error" aria-live="polite">Informe o banco.</small>
              </label>
            </div>
            <div class="row">
              <label>
                <span>N√∫mero do BO <span class="badge badge-opt">Opcional</span></span>
                <input id="bo" type="text" placeholder="2025-000000" />
              </label>
              <label>
                <span>Anexar B.O <span class="badge badge-opt">Opcional</span></span>
                <input type="file" accept=".pdf,.jpg,.jpeg,.png" />
              </label>
            </div>
            <label>
              <span>Confirma√ß√£o <span class="badge badge-opt">Opcional</span></span>
              <textarea id="desc" rows="3" placeholder="Conte, com serenidade, o que aconteceu"></textarea>
            </label>
            <div class="actions" style="justify-content:center">
              <a class="btn ghost" data-route href="#/hub">‚Üê Voltar</a>
              <button class="btn primary" type="submit">Confirmar den√∫ncia</button>
            </div>
            <p id="flash" class="sr-only" aria-live="polite"></p>
          </form>
        </section>

        <!-- PESQUISAR -->
        <section id="pesquisar" class="page card" aria-labelledby="h-pesquisar">
          <h1 id="h-pesquisar">Pesquisar den√∫ncias</h1>

          <div class="search-bar">
            <p class="label">Filtre pela natureza da chave.</p>
            <div class="controls">
              <input id="q" type="search" placeholder="Digite sua busca" />
              <button id="btn-buscar" class="btn primary" type="button">Buscar</button>
              <button id="btn-limpar" class="btn ghost" type="button">Limpar</button>
              <a id="btn-voltar" class="btn ghost" data-route href="#/hub">‚Üê Voltar</a>
            </div>
          </div>

          <div class="muted" style="margin:0 0 8px">
            <strong>Legenda:</strong>
            <span class="badge" style="background:var(--warn)">5 Risco de Golpe</span>
            <span class="badge" style="background:var(--amber)">10 Grave risco de golpe</span>
            <span class="badge" style="background:var(--danger); color:#fff">15 Grav√≠ssimo risco de golpe</span>
          </div>

          <div style="overflow:auto">
            <table aria-label="Resultados de pesquisa" id="resultados">
              <thead>
                <tr>
                  <th>Tipo de chave Pix</th>
                  <th>Nome da conta</th>
                  <th>Meio do CPF/CNPJ</th>
                  <th>Ag√™ncia</th>
                  <th>Conta</th>
                  <th>Banco</th>
                  <th>N¬∫ do BO</th>
                  <th>Den√∫ncias</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>
        </section>

        <!-- FAQ -->
        <section id="faq" class="page card" aria-labelledby="h-faq">
          <h1 id="h-faq">FAQ</h1>
          <div class="grid" style="max-width:980px; margin:0 auto">
            <details>
              <summary><strong>Meu Pix aparece denunciado, como posso contestar?</strong></summary>
              <p>Envie um e-mail para <a href="mailto:deolhonopix@gmail.com">deolhonopix@gmail.com</a>. Responderemos com orienta√ß√µes serenas.</p>
            </details>
            <details>
              <summary><strong>Como eu fa√ßo um boletim de ocorr√™ncia?</strong></summary>
              <p>Acesse: <a href="https://www.delegaciaeletronica.policiacivil.sp.gov.br/ssp-de-cidadao/home" target="_blank" rel="noopener">Delegacia Eletr√¥nica ‚Äî SP</a>.</p>
            </details>
            <details>
              <summary><strong>Por que √© obrigat√≥rio anexar o BO?</strong></summary>
              <p>O B.O fortalece a confiabilidade das den√∫ncias e ajuda a comunidade.</p>
            </details>
            <details>
              <summary><strong>A minha den√∫ncia √© segura?</strong></summary>
              <p>Sim. Suas informa√ß√µes n√£o s√£o expostas publicamente neste prot√≥tipo.</p>
            </details>
            <details>
              <summary><strong>O site pode me ajudar com o banco ou estorno?</strong></summary>
              <p>Este site √© colaborativo e educativo; para quest√µes banc√°rias, contate seu banco e as autoridades.</p>
            </details>
            <details>
              <summary><strong>Em quanto tempo minha den√∫ncia √© processada?</strong></summary>
              <p>No sistema real, a ideia √© processamento imediato. Este prot√≥tipo demonstra apenas a interface.</p>
            </details>
          </div>
        </section>

        <!-- Recuperar senha -->
        <section id="recuperar" class="page card" aria-labelledby="h-recuperar">
          <h1 id="h-recuperar">Recuperar senha</h1>
          <form style="max-width:560px; margin:0 auto" novalidate>
            <label>
              <span>E-mail cadastrado <span class="badge badge-req">Obrigat√≥rio</span></span>
              <input type="email" required placeholder="voce@exemplo.com" aria-invalid="false" />
              <small class="error">Informe um e-mail v√°lido.</small>
            </label>
            <div class="actions" style="justify-content:center">
              <a class="btn ghost" data-route href="#/inicio">‚Üê Voltar</a>
              <a class="btn primary" data-route href="#/inicio">Enviar link</a>
            </div>
          </form>
        </section>
      </main>
    </div>

    <footer role="contentinfo">
      <div class="foot">
        <div>¬© <span id="y"></span> De Olho no Pix ¬∑ <a href="#/faq" data-route>FAQ</a></div>
        <div><small class="muted">Prot√≥tipo sem coleta real de dados</small></div>
      </div>
    </footer>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true">Cadastro realizado com sucesso! Agora √© s√≥ entrar.</div>

  <script>
    // Atualiza o ano
    document.getElementById('y').textContent = new Date().getFullYear();

    // Prefer√™ncias de tema
    const body = document.body;
    const btnDark = document.getElementById('btn-dark');
    const btnContrast = document.getElementById('btn-contrast');

    // Restaurar prefer√™ncias
    const savedDark = localStorage.getItem('mode-dark') === 'true';
    const savedDal  = localStorage.getItem('mode-daltonico') === 'true';
    if(savedDark) body.classList.add('dark');
    if(savedDal)  body.classList.add('daltonico');

    // Garantir que n√£o somem temas: ativar um desativa o outro
    function setDark(on){
      body.classList.toggle('dark', !!on);
      if(on){ body.classList.remove('daltonico'); localStorage.setItem('mode-daltonico','false'); }
      localStorage.setItem('mode-dark', on ? 'true' : 'false');
    }
    function setDal(on){
      body.classList.toggle('daltonico', !!on);
      if(on){ body.classList.remove('dark'); localStorage.setItem('mode-dark','false'); }
      localStorage.setItem('mode-daltonico', on ? 'true' : 'false');
    }

    btnDark?.addEventListener('click', ()=> setDark(!body.classList.contains('dark')));
    btnContrast?.addEventListener('click', ()=> setDal(!body.classList.contains('daltonico')));

    // Utilit√°rio
    function onlyDigits(v){return (v||'').replace(/\D+/g,'');}

    // M√°scaras
    function maskCPF(el){
      let v = onlyDigits(el.value).slice(0,11);
      let out = '';
      if(v.length>9){ out = v.replace(/(\d{3})(\d{3})(\d{3})(\d{0,2})/, (m,a,b,c,d)=> `${a}.${b}.${c}${d?'-'+d:''}`); }
      else if(v.length>6){ out = v.replace(/(\d{3})(\d{3})(\d{0,3})/, (m,a,b,c)=> `${a}.${b}.${c}`); }
      else if(v.length>3){ out = v.replace(/(\d{3})(\d{0,3})/, (m,a,b)=> `${a}.${b}`); }
      else { out = v; }
      el.value = out;
      el.setAttribute('aria-invalid', v.length===11 ? 'false' : 'true');
    }
    function maskTEL(el){
      let v = onlyDigits(el.value).slice(0,11);
      if(v.length>10){ el.value = v.replace(/(\d{2})(\d{5})(\d{0,4})/, '($1) $2-$3'); }
      else if(v.length>6){ el.value = v.replace(/(\d{2})(\d{0,5})(\d{0,4})/, (m,a,b,c)=>`(${a}) ${b}${c?'-'+c:''}`); }
      else if(v.length>2){ el.value = v.replace(/(\d{2})(\d{0,5})/, (m,a,b)=>`(${a}) ${b}`); }
      else { el.value = v; }
      el.setAttribute('aria-invalid', v.length===11 ? 'false' : 'true');
    }
    function maskAG(el){
      let v = onlyDigits(el.value).slice(0,4);
      el.value = v;
      el.setAttribute('aria-invalid', v.length>0 ? 'false' : 'true');
    }
    function maskCC(el){
      let v = onlyDigits(el.value).slice(0,12);
      if(v.length>1){ el.value = v.replace(/(\d{1,11})(\d{0,1})/, (m,a,b)=> b?`${a}-${b}`:a ); }
      else { el.value = v; }
      el.setAttribute('aria-invalid', v.length>0 ? 'false' : 'true');
    }

    // Liga m√°scaras
    const cpf = document.getElementById('cpf');
    const tel = document.getElementById('tel');
    const ag  = document.getElementById('ag');
    const cc  = document.getElementById('cc');
    if(cpf){ cpf.addEventListener('input', ()=>maskCPF(cpf)); }
    if(tel){ tel.addEventListener('input', ()=>maskTEL(tel)); }
    if(ag){  ag.addEventListener('input', ()=>maskAG(ag)); }
    if(cc){  cc.addEventListener('input', ()=>maskCC(cc)); }

    // Roteador simples + topnav din√¢mica
    const routes = ["inicio","cadastro","hub","denunciar","pesquisar","faq","recuperar"];
    function setActive(slug){
      routes.forEach(id=>{
        const el = document.getElementById(id);
        if(!el) return;
        el.classList.toggle('active', id===slug);
      });
      // Atualiza aria-current nos links
      document.querySelectorAll('[data-route]').forEach(a=>{
        const dest = (a.getAttribute('href')||'').replace(/^#\//,'');
        a.setAttribute('aria-current', dest===slug ? 'page' : 'false');
      });
      // Topnav: mostrar somente FAQ nas telas de login/cadastro/recuperar
      const nav = document.querySelector('.topnav');
      if(nav){
        if(['inicio','cadastro','recuperar'].includes(slug)){
          nav.querySelectorAll('a').forEach(a=>{
            const href = a.getAttribute('href');
            a.style.display = href==="#/faq" ? 'inline-flex' : 'none';
          });
        } else {
          nav.querySelectorAll('a').forEach(a=> a.style.display = 'inline-flex');
        }
      }
    }
    function currentSlug(){
      const h = window.location.hash || '#/inicio';
      const slug = h.replace(/^#\//,'');
      return routes.includes(slug)? slug : 'inicio';
    }
    function onRoute(){ setActive(currentSlug()); }
    window.addEventListener('hashchange', onRoute);
    window.addEventListener('DOMContentLoaded', onRoute);

    // Seed & storage (prot√≥tipo)
    const seed = [
      {tipo:'CPF', nome:'Maria S.', doc:'***.123.***-**', ag:'0001', cc:'123456-7', banco:'Banco A', bo:'2025-000001', denuncias:6, risco:5},
      {tipo:'E-mail', nome:'Com√©rcio XYZ', doc:'‚Äî', ag:'0456', cc:'98765-4', banco:'Banco B', bo:'‚Äî', denuncias:11, risco:10},
      {tipo:'Chave aleat√≥ria', nome:'Jo√£o P.', doc:'‚Äî', ag:'1234', cc:'000222-1', banco:'Banco C', bo:'2025-000777', denuncias:18, risco:15}
    ];

    const storeKey = 'deolhonopix-denuncias';
    function getData(){
      try{ return JSON.parse(localStorage.getItem(storeKey)) || seed.slice(); }
      catch{ return seed.slice(); }
    }
    function setData(rows){ localStorage.setItem(storeKey, JSON.stringify(rows)); }

    // Render tabela de pesquisa
    function renderTable(rows){
      const tbody = document.getElementById('tbody');
      if(!tbody) return;
      tbody.innerHTML = '';
      rows.forEach(r => {
        const tr = document.createElement('tr');
        tr.className = r.risco===15?'risk-15': r.risco===10?'risk-10':'risk-5';
        tr.innerHTML = `
          <td>${r.tipo}</td>
          <td>${r.nome}</td>
          <td>${r.doc}</td>
          <td>${r.ag}</td>
          <td>${r.cc}</td>
          <td>${r.banco}</td>
          <td>${r.bo}</td>
          <td><span class="badge">${r.denuncias}</span></td>`;
        tbody.appendChild(tr);
      });
    }

    // Busca simples
    const q = document.getElementById('q');
    const btnBuscar = document.getElementById('btn-buscar');
    const btnLimpar = document.getElementById('btn-limpar');
    btnBuscar?.addEventListener('click', ()=>{
      const term = (q?.value||'').toLowerCase();
      const out = getData().filter(r=>{
        return [r.tipo, r.nome, r.doc, r.ag, r.cc, r.banco, r.bo].some(v=> String(v).toLowerCase().includes(term));
      });
      renderTable(out);
    });
    btnLimpar?.addEventListener('click', ()=>{ if(q){ q.value=''; } renderTable(getData()); });

    // Submiss√£o de den√∫ncia (armazena localmente)
    const formDen = document.getElementById('form-denuncia');
    formDen?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const tipo = document.getElementById('tipo');
      const nome = document.getElementById('nome');
      const agi  = document.getElementById('ag');
      const cci  = document.getElementById('cc');
      const banco= document.getElementById('banco');
      const bo   = document.getElementById('bo');

      const required = [tipo, nome, agi, cci, banco];
      let ok = true;
      required.forEach(el=>{
        if(!el.value){ el.setAttribute('aria-invalid','true'); ok=false; }
        else el.setAttribute('aria-invalid','false');
      });
      if(!ok){
        showToast('Preencha todos os campos obrigat√≥rios.');
        return;
      }

      const novo = {
        tipo: tipo.value,
        nome: nome.value,
        doc: (document.getElementById('docparcial')?.value)||'‚Äî',
        ag: agi.value,
        cc: cci.value,
        banco: banco.value,
        bo: bo.value||'‚Äî',
        denuncias: 1,
        risco: 5
      };
      const data = getData();
      data.unshift(novo);
      setData(data);
      renderTable(data);
      showToast('Den√∫ncia registrada localmente (prot√≥tipo).');
      window.location.hash = '#/pesquisar';
    });

    // Cadastro: mostra toast e volta pra Entrar
    const formCad = document.getElementById('form-cadastro');
    function showToast(msg){
      const t = document.getElementById('toast');
      if(!t) return; t.textContent = msg; t.classList.add('show');
      setTimeout(()=> t.classList.remove('show'), 3000);
    }
    formCad?.addEventListener('submit', (e)=>{
      e.preventDefault();
      if(!formCad.checkValidity()){
        showToast('Preencha os campos obrigat√≥rios.');
        return;
      }
      window.location.hash = '#/inicio';
      showToast('Cadastro realizado com sucesso! Agora √© s√≥ entrar.');
    });

    // Primeira renderiza√ß√£o da tabela
    window.addEventListener('DOMContentLoaded', ()=>{ renderTable(getData()); });
  </script>
</body>
</html>
